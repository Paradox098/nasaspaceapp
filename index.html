<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Ultimate 3D Exoplanet Explorer</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            font-family: 'Arial', sans-serif;
            background-color: #000;
            color: #fff;
        }
        #container {
            width: 100vw;
            height: 100vh;
        }
        #infoBox {
            position: absolute;
            top: 20px;
            left: 20px;
            padding: 20px;
            background-color: rgba(0, 0, 0, 0.7);
            border-radius: 10px;
            max-width: 300px;
            font-size: 14px;
            line-height: 1.4;
            z-index: 100;
            transition: all 0.3s ease;
        }
        #controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            z-index: 100;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            background-color: rgba(255, 255, 255, 0.1);
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        button:hover {
            background-color: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }
        #loadingScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: opacity 1s ease-out;
        }
        #loadingText {
            color: #fff;
            font-size: 24px;
        }
    </style>
</head>
<body>
    <div id="loadingScreen">
        <div id="loadingText">Loading Ultimate Exoplanet Explorer...</div>
    </div>
    <div id="container"></div>
    <div id="infoBox">Click on a planet for detailed info.</div>
    <div id="controls">
        <button id="toggleOrbits">Toggle Orbits</button>
        <button id="toggleRotation">Toggle Rotation</button>
        <button id="toggleAtmosphere">Toggle Atmosphere</button>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/18.6.4/tween.umd.js"></script>

    <script>
        let scene, camera, renderer, controls;
        let sun, earth, exoplanet1, exoplanet2;
        let earthAtmosphere, exo1Atmosphere, exo2Atmosphere;
        let earthOrbit, exo1Orbit, exo2Orbit;
        let starField;
        let raycaster, mouse;
        let isRotating = true, showOrbits = true, showAtmosphere = true;

        const planetData = {
            'Sun': {
                name: 'Sun',
                description: 'The star at the center of our Solar System.',
                radius: '696,340 km',
                mass: '1.989 × 10^30 kg',
                temperature: '5,778 K (surface)'
            },
            'Earth': {
                name: 'Earth',
                description: 'Our home planet, the third from the Sun in the Solar System.',
                radius: '6,371 km',
                mass: '5.97 × 10^24 kg',
                orbitalPeriod: '365.25 days'
            },
            'Kepler-186f': {
                name: 'Kepler-186f',
                description: 'An exoplanet orbiting the red dwarf Kepler-186, about 582 light-years from Earth.',
                radius: '1.17 × Earth radius',
                mass: 'Unknown',
                orbitalPeriod: '129.9 days'
            },
            'TRAPPIST-1e': {
                name: 'TRAPPIST-1e',
                description: 'An exoplanet orbiting the ultra-cool dwarf star TRAPPIST-1, about 39 light-years from Earth.',
                radius: '0.92 × Earth radius',
                mass: '0.77 × Earth mass',
                orbitalPeriod: '6.1 days'
            }
        };

        function init() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.getElementById('container').appendChild(renderer.domElement);

            camera.position.z = 30;
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;

            raycaster = new THREE.Raycaster();
            mouse = new THREE.Vector2();

            createLighting();
            createPlanets();
            createStarField();
            createOrbits();
            setupEventListeners();
        }

        function createLighting() {
            const ambientLight = new THREE.AmbientLight(0x333333);
            scene.add(ambientLight);

            const sunLight = new THREE.PointLight(0xFFFFFF, 2, 300);
            sunLight.position.set(0, 0, 0);
            scene.add(sunLight);
        }

        function createPlanets() {
            const loader = new THREE.TextureLoader();

            // Sun
            const sunGeometry = new THREE.SphereGeometry(3, 32, 32);
            const sunMaterial = new THREE.MeshBasicMaterial({
                map: loader.load('8k_sun.jpg')
            });
            sun = new THREE.Mesh(sunGeometry, sunMaterial);
            scene.add(sun);

            // Earth
            const earthGeometry = new THREE.SphereGeometry(1, 32, 32);
            const earthMaterial = new THREE.MeshPhongMaterial({
                map: loader.load('8k_earth_daymap.jpg'),
                bumpMap: loader.load('8k_earth_nightmap.jpg'),
                bumpScale: 0.05,
                specularMap: loader.load('https://upload.wikimedia.org/wikipedia/commons/4/48/Shadedrelief.jpg'),
                specular: new THREE.Color('grey')
            });
            earth = new THREE.Mesh(earthGeometry, earthMaterial);
            earth.position.set(10, 0, 0);
            scene.add(earth);

            // Earth's atmosphere
            const earthAtmosphereGeometry = new THREE.SphereGeometry(1.01, 32, 32);
            const earthAtmosphereMaterial = new THREE.MeshPhongMaterial({
                color: 0x4CA1FF,
                transparent: true,
                opacity: 0.2,
                side: THREE.BackSide
            });
            earthAtmosphere = new THREE.Mesh(earthAtmosphereGeometry, earthAtmosphereMaterial);
            earth.add(earthAtmosphere);

            // Exoplanet 1 (Kepler-186f)
            const exo1Geometry = new THREE.SphereGeometry(1.17, 32, 32);
            const exo1Material = new THREE.MeshPhongMaterial({
                map: loader.load('https://upload.wikimedia.org/wikipedia/commons/thumb/7/72/Artist%27s_rendering_of_Kepler-186f.jpg/1024px-Artist%27s_rendering_of_Kepler-186f.jpg'),
                bumpScale: 0.05,
                specular: new THREE.Color('grey')
            });
            exoplanet1 = new THREE.Mesh(exo1Geometry, exo1Material);
            exoplanet1.position.set(15, 0, 0);
            scene.add(exoplanet1);

            // Exoplanet 1's atmosphere
            const exo1AtmosphereGeometry = new THREE.SphereGeometry(1.18, 32, 32);
            const exo1AtmosphereMaterial = new THREE.MeshPhongMaterial({
                color: 0x7FFFD4,
                transparent: true,
                opacity: 0.2,
                side: THREE.BackSide
            });
            exo1Atmosphere = new THREE.Mesh(exo1AtmosphereGeometry, exo1AtmosphereMaterial);
            exoplanet1.add(exo1Atmosphere);

            // Exoplanet 2 (TRAPPIST-1e)
            const exo2Geometry = new THREE.SphereGeometry(0.92, 32, 32);
            const exo2Material = new THREE.MeshPhongMaterial({
                map: loader.load('https://upload.wikimedia.org/wikipedia/commons/thumb/9/9e/Artist%27s_depiction_of_the_surface_of_the_exoplanet_TRAPPIST-1f.jpg/1024px-Artist%27s_depiction_of_the_surface_of_the_exoplanet_TRAPPIST-1f.jpg'),
                bumpScale: 0.05,
                specular: new THREE.Color('grey')
            });
            exoplanet2 = new THREE.Mesh(exo2Geometry, exo2Material);
            exoplanet2.position.set(20, 0, 0);
            scene.add(exoplanet2);

            // Exoplanet 2's atmosphere
            const exo2AtmosphereGeometry = new THREE.SphereGeometry(0.93, 32, 32);
            const exo2AtmosphereMaterial = new THREE.MeshPhongMaterial({
                color: 0xFFA500,
                transparent: true,
                opacity: 0.2,
                side: THREE.BackSide
            });
            exo2Atmosphere = new THREE.Mesh(exo2AtmosphereGeometry, exo2AtmosphereMaterial);
            exoplanet2.add(exo2Atmosphere);
        }

        function createStarField() {
            const starGeometry = new THREE.BufferGeometry();
            const starMaterial = new THREE.PointsMaterial({
                color: 0xFFFFFF,
                size: 0.05,
                transparent: true
            });

            const starVertices = [];
            for (let i = 0; i < 10000; i++) {
                const x = (Math.random() - 0.5) * 2000;
                const y = (Math.random() - 0.5) * 2000;
                const z = (Math.random() - 0.5) * 2000;
                starVertices.push(x, y, z);
            }

            starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starVertices, 3));
            starField = new THREE.Points(starGeometry, starMaterial);
            scene.add(starField);
        }

        function createOrbits() {
            const createOrbitLine = (radius) => {
                const orbitGeometry = new THREE.BufferGeometry();
                const orbitMaterial = new THREE.LineBasicMaterial({ color: 0xFFFFFF, transparent: true, opacity: 0.3 });
                const orbitPoints = [];
                for (let i = 0; i <= 64; i++) {
                    const angle = (i / 64) * Math.PI * 2;
                    orbitPoints.push(new THREE.Vector3(Math.cos(angle) * radius, 0, Math.sin(angle) * radius));
                }
                orbitGeometry.setFromPoints(orbitPoints);
                return new THREE.Line(orbitGeometry, orbitMaterial);
            };

            earthOrbit = createOrbitLine(10);
            exo1Orbit = createOrbitLine(15);
            exo2Orbit = createOrbitLine(20);
            scene.add(earthOrbit, exo1Orbit, exo2Orbit);
        }

        function setupEventListeners() {
    window.addEventListener('resize', onWindowResize, false);
    
    // Adding click and touch event listeners
    window.addEventListener('click', onMouseClick, false);
    window.addEventListener('touchstart', onMouseClick, false); // Touch event for mobile

    const toggleOrbitsButton = document.getElementById('toggleOrbits');
    const toggleRotationButton = document.getElementById('toggleRotation');
    const toggleAtmosphereButton = document.getElementById('toggleAtmosphere');

    // Adding click and touch event listeners to buttons
    toggleOrbitsButton.addEventListener('click', toggleOrbits);
    toggleOrbitsButton.addEventListener('touchstart', toggleOrbits);

    toggleRotationButton.addEventListener('click', toggleRotation);
    toggleRotationButton.addEventListener('touchstart', toggleRotation);

    toggleAtmosphereButton.addEventListener('click', toggleAtmosphere);
    toggleAtmosphereButton.addEventListener('touchstart', toggleAtmosphere);
}

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

       

        function onMouseClick(event) {
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects([sun, earth, exoplanet1, exoplanet2]);

            if (intersects.length > 0) {
                const object = intersects[0].object;
                let planetInfo;
                if (object === sun) planetInfo = planetData['Sun'];
                else if (object === earth) planetInfo = planetData['Earth'];
                else if (object === exoplanet1) planetInfo = planetData['Kepler-186f'];
                else if (object === exoplanet2) planetInfo = planetData['TRAPPIST-1e'];

                if (planetInfo) {
                    const infoBox = document.getElementById('infoBox');
                    infoBox.innerHTML = `
                        <h3>${planetInfo.name}</h3>
                        <p>${planetInfo.description}</p>
                        <p><strong>Radius:</strong> ${planetInfo.radius}</p>
                        <p><strong>Mass:</strong> ${planetInfo.mass}</p>
                        ${planetInfo.orbitalPeriod ? `<p><strong>Orbital Period:</strong> ${planetInfo.orbitalPeriod}</p>` : ''}
                        ${planetInfo.temperature ? `<p><strong>Temperature:</strong> ${planetInfo.temperature}</p>` : ''}
                    `;
                    infoBox.style.opacity = '1';
                }
            }
        }

        function toggleOrbits() {
            showOrbits = !showOrbits;
            earthOrbit.visible = showOrbits;
            exo1Orbit.visible = showOrbits;
            exo2Orbit.visible = showOrbits;
        }

        function toggleRotation() {
            isRotating = !isRotating;
        }

        function toggleAtmosphere() {
            showAtmosphere = !showAtmosphere;
            earthAtmosphere.visible = showAtmosphere;
            exo1Atmosphere.visible = showAtmosphere;
            exo2Atmosphere.visible = showAtmosphere;
        }

        function animate() {
            requestAnimationFrame(animate);

            if (isRotating) {
                sun.rotation.y += 0.001;
                earth.rotation.y += 0.005;
                exoplanet1.rotation.y += 0.003;
                exoplanet2.rotation.y += 0.004;
            }

            // Planet orbits
            const time = Date.now() * 0.0001;
            earth.position.x = Math.cos(time) * 10;
            earth.position.z = Math.sin(time) * 10;

            exoplanet1.position.x = Math.cos(time * 0.8) * 15;
            exoplanet1.position.z = Math.sin(time * 0.8) * 15;

            exoplanet2.position.x = Math.cos(time * 0.6) * 20;
            exoplanet2.position.z = Math.sin(time * 0.6) * 20;

            // Rotate starfield
            starField.rotation.y += 0.0001;

            controls.update();
            renderer.render(scene, camera);
        }

        init();
        animate();

        // Loading screen
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.getElementById('loadingScreen').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('loadingScreen').style.display = 'none';
                }, 1000);
            }, 1000);
        });
        
    </script>
    
</body>
</html>
